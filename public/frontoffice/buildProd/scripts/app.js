var app=angular.module("greenTeufFrontOffice",["ngResource","ngRoute","ngAnimate","ngTouch","ngSanitize","ui.bootstrap","textAngular"]);app.controller("MainController",["$scope",function(a){a.$on("PUSH_OPEN_SETTING_BUTTON",function(b){a.$broadcast("OPEN_SETTING")})}]),app.controller("Block.Footer.Controller",["$scope",function(a){}]),app.controller("Block.NavBar.Controller",["$scope","$location",function(a,b){a.getClass=function(a){return"home"==a?"/"===b.path()?"active":"":b.path().substr(0,a.length)===a?"active":""}}]),app.directive("slider",function(a){return{restrict:"AE",replace:!0,scope:{images:"="},link:function(b,c,d){b.currentIndex=0,b.next=function(){b.currentIndex<b.images.length-1?b.currentIndex++:b.currentIndex=0},b.prev=function(){b.currentIndex>0?b.currentIndex--:b.currentIndex=b.images.length-1},b.$watch("currentIndex",function(){b.images.forEach(function(a){a.visible=!1}),b.images[b.currentIndex].visible=!0});var e,f=function(){e=a(function(){b.next(),e=a(f,2e3)},2e3)};f(),b.$on("$destroy",function(){a.cancel(e)})},templateUrl:"Blocks/Directive/slider.html"}}),app.config(["$locationProvider",function(a){a.hashPrefix("")}]),app.config(function(a){for(var b=[{name:"Accueil",templateUrl:"Modules/Main/Main.html",route:""},{name:"NotFound",templateUrl:"Modules/Main/404.html",route:"404"},{name:"Products",templateUrl:"Modules/Products/Products.html",route:"produits",controller:"productsController"},{name:"Product",templateUrl:"Modules/Product/Product.html",route:"produit/:ID",controller:"productController"}],c=0;c<b.length;c++){var d=b[c];a.when("/"+d.route,{templateUrl:d.templateUrl,controller:d.controller,controllerAs:d.controller})}a.otherwise({redirectTo:"/404"})}),app.factory("app.config",[function(){return this.apiurl="http://fete.lc",this}]),app.factory("app.products",["$http",function(a){var b="http://fete.lc/api/product";return this.cget=function(){return a({method:"GET",url:b})},this.get=function(c){return a({method:"GET",url:b+"/"+c})},this.comment=function(c,d){return a({method:"POST",url:b+"/"+c+"/comment",data:d})},this}]),app.filter("dateToISO",function(){return function(a){return a=new Date(a).toISOString()}}),app.controller("mainController",["$scope","app.products",function(a,b){var c=this;c.reloadProducts=function(){b.cget().then(function(b){a.products=b.data.data})},c.reloadProducts()}]),app.controller("productController",["$scope","app.products","$routeParams",function(a,b,c){var d=this;d.loadProduct=function(c){a.productId=c,b.get(c).then(function(b){a.product=b.data.data})},a.comment=function(){a.newComment={pseudo:null,text:null}},a.saveComment=function(c){b.comment(a.productId,c).then(function(b){d.loadProduct(a.productId)})},d.loadProduct(c.ID)}]),app.controller("productsController",["$scope","app.products",function(a,b){var c=this;c.reloadProducts=function(){b.cget().then(function(b){a.products=b.data.data})},c.reloadProducts()}]);